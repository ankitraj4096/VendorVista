<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Profile | StreetSymphony</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Poppins&display=swap" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <style>
    :root {
      --primary: #58c061;
      --primary-dark: #357138;
      --secondary: #fffef7;
      --card-bg: #f7fdf6;
      --border: #dbeadb;
      --shadow: 0 6px 30px rgba(41, 88, 40, 0.12);
      --text-dark: #232c1e;
      --text-light: #526a3b;
      --button: #26c485;
      --button-hover: #1fa471;
      --button-text: #fff;
      --accent: #fbe27a;
    }
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', Arial, sans-serif;
      background: var(--secondary);
      color: var(--text-dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header.navbar {
      width: 100vw;
      left: 0;
      right: 0;
      padding: 15px 0;
      background: var(--primary);
      color: #fff;
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 1.35rem;
      display: flex;
      justify-content: center;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.13);
      border-radius: 0 0 18px 18px;
      min-width: 0;
    }
    .navbar-inner {
      width: 100%;
      max-width: 1200px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    nav.main-nav {
      display: flex;
      gap: 26px;
      flex-wrap: wrap;
      align-items: center;
    }
    nav.main-nav a {
      color: #fff;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.05rem;
      padding-bottom: 2px;
      border-bottom: 2.5px solid transparent;
      transition: color 0.2s, border-bottom-color 0.2s;
      position: relative;
    }
    nav.main-nav a:hover,
    nav.main-nav a.active {
      color: var(--accent);
      border-bottom-color: var(--accent);
    }
    main.container {
      max-width: 900px;
      width: 95%;
      margin: 44px auto 60px auto;
      background: var(--card-bg);
      box-shadow: var(--shadow);
      border-radius: 1.3em;
      padding: 36px 36px 48px 36px;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }
    header.page-header {
      font-family: 'Montserrat', sans-serif;
      font-weight: 800;
      font-size: 2rem;
      color: var(--primary-dark);
      margin: 0 0 10px 0;
    }
    section.profile-info {
      display: flex;
      flex-wrap: wrap;
      gap: 32px;
      align-items: flex-start;
    }
    .profile-picture {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      background-color: #d1f1bd;
      border: 4px solid var(--primary);
      box-shadow: 0 7px 30px #a6d38b88;
      object-fit: cover;
      flex-shrink: 0;
    }
    .profile-details {
      flex: 1;
      min-width: 280px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      font-size: 1.05rem;
      color: var(--text-dark);
    }
    label {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 4px;
      display: block;
    }
    input[readonly], textarea[readonly] {
      background: #fafaf5;
      border-radius: 0.8em;
      border: 1.5px solid var(--border);
      color: var(--text-dark);
      width: 100%;
      padding: 10px 14px;
      font-family: inherit;
      font-size: 1rem;
      resize: vertical;
    }
    textarea[readonly] {
      min-height: 90px;
    }
    input:not([readonly]):focus,
    textarea:not([readonly]):focus {
      outline: 2px solid var(--primary);
      box-shadow: 0 0 7px #a1d484bd;
      background: white;
    }
    input.editable,
    textarea.editable {
      border: 1.5px solid var(--primary);
      background: #fefef9;
    }
    .buttons-row {
      margin-top: 16px;
      display: flex;
      gap: 16px;
    }
    button.edit-btn,
    button.save-btn,
    button.cancel-btn,
    button.logout-btn {
      font-weight: 700;
      font-family: 'Montserrat', sans-serif;
      font-size: 1.05rem;
      padding: 10px 30px;
      border-radius: 2em;
      border: none;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 6px 20px #58c061cc;
      transition: background-color 0.25s ease;
    }
    button.edit-btn, button.save-btn {
      background: var(--primary);
      color: var(--button-text);
    }
    button.edit-btn:hover,
    button.edit-btn:focus-visible,
    button.save-btn:hover,
    button.save-btn:focus-visible {
      background: var(--button-hover);
      outline: none;
    }
    button.cancel-btn {
      background: #f0f0f0;
      color: #666;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.06);
    }
    button.cancel-btn:hover,
    button.cancel-btn:focus-visible {
      background: #e0e0e0;
      color: #333;
      outline: none;
    }
    button.logout-btn {
      background: #e4e4e6;
      color: #232c1e;
      margin-left: auto;
      min-width: 120px;
      box-shadow: 0 4px 18px #5bc26122;
    }
    button.logout-btn:hover, button.logout-btn:focus-visible {
      background: #fde15d;
      color: #333;
      outline: none;
    }
    section.vendor-extra {
      background: #e6f4db;
      border-radius: 1.1em;
      padding: 22px 26px;
      box-shadow: 0 5px 20px #b0dc8966;
      font-size: 1rem;
      color: var(--primary-dark);
    }
    section.vendor-extra h3 {
      margin-top: 0;
      margin-bottom: 16px;
      font-weight: 700;
    }
    section.vendor-extra p {
      margin: 6px 0;
      white-space: pre-wrap;
    }
    @media (max-width: 650px) {
      main.container {
        padding: 24px 20px 36px 20px;
        width: 95%;
        margin: 30px auto 50px auto;
      }
      section.profile-info {
        flex-direction: column;
        align-items: center;
      }
      .profile-details {
        min-width: auto;
        width: 100%;
      }
      .profile-picture {
        width: 120px;
        height: 120px;
      }
      .buttons-row { flex-direction: column; gap: 10px; }
      button.logout-btn { margin-left: 0; }
    }
  </style>
</head>
<body>
  <script>
    var currentUserRole = 'buyer'; // set as 'buyer' or 'vendor'
  </script>
  <header class="navbar" role="banner">
    <div class="navbar-inner" id="navbarInner">
      <span style="font-family:'Montserrat',sans-serif;font-size:1.4rem;font-weight:900;letter-spacing:1px;">StreetSymphony</span>
      <nav class="main-nav" role="navigation" aria-label="Primary navigation" id="navLinks"><!-- injected by JS --></nav>
    </div>
  </header>
  <main class="container" role="main" aria-label="User Profile Page">
    <header class="page-header" tabindex="0">My Profile</header>
    <section class="profile-info">
      <img
        src="https://images.unsplash.com/photo-1508214751196-bcfd4ca60f91?auto=format&fit=crop&w=200&q=80"
        alt="User profile thumbnail"
        class="profile-picture"
      />
      <div class="profile-details">
        <div>
          <label for="fullName">Full Name</label>
          <input type="text" id="fullName" readonly value="Ram Kumar" />
        </div>
        <div>
          <label for="emailAddress">Email</label>
          <input type="text" id="emailAddress" readonly value="ram.kumar@example.com" />
        </div>
        <div>
          <label for="phoneNumber">Phone Number</label>
          <input type="text" id="phoneNumber" readonly value="+91 98765 43210" />
        </div>
        <section class="vendor-extra" aria-label="Vendor Info" tabindex="0" id="vendorExtraInfo" hidden>
          <h3>Vendor Details</h3>
          <p><strong>Shop/Farm Name:</strong> Green Valley Farm</p>
          <p><strong>Location:</strong> Near Sadar Bazaar, Delhi</p>
          <p><strong>Operating Hours:</strong> Mon-Sun 7:00 AM - 8:00 PM</p>
          <p><strong>Description:</strong> Trusted provider of fresh and organic vegetables and fruits sourced directly from family-owned farmland, committed to quality and sustainability.</p>
        </section>
        <div class="buttons-row">
          <button class="edit-btn" id="editProfileBtn" aria-label="Edit Profile">Edit Profile</button>
          <button class="save-btn" id="saveProfileBtn" aria-label="Save Profile" style="display:none;">Save</button>
          <button class="cancel-btn" id="cancelEditBtn" aria-label="Cancel Editing Profile" style="display:none;">Cancel</button>
          <button class="logout-btn" id="logoutBtn" type="button" aria-label="Log Out">Logout</button>
        </div>
      </div>
    </section>
  </main>
  <script>
    // Navbar links (role-based)
    (function(){
      const nav = document.getElementById('navLinks');
      let dashboardLink = '';
      if(currentUserRole === 'vendor'){
        dashboardLink = '<a href="/vendor-dashboard">Dashboard</a>';
        document.getElementById('vendorExtraInfo').hidden = false;
      } else {
        dashboardLink = '<a href="/buyer-dashboard">Dashboard</a>';
      }
      nav.innerHTML = dashboardLink +
        '<a href="/buyer-fresh-produce">Produce</a>' +
        '<a href="/buyer-vendor">Favorite Vendors</a>' +
        '<a href="/buyer-exchange">Ingredient Swap</a>' +
        '<a href="/shared-live-map">Map</a>' +
        '<a href="/shared-stories-feed">Stories</a>' +
        '<a href="/shared-profile" class="active" aria-current="page" aria-label="User Profile"><i class="bi bi-person-circle"></i></a>';
    })();

    // Profile editing and logout
    const editButton = document.getElementById('editProfileBtn');
    const saveButton = document.getElementById('saveProfileBtn');
    const cancelButton = document.getElementById('cancelEditBtn');
    const logoutButton = document.getElementById('logoutBtn');
    const fullNameInput = document.getElementById('fullName');
    const emailInput = document.getElementById('emailAddress');
    const phoneInput = document.getElementById('phoneNumber');
    let originalValues = {};

    editButton.addEventListener('click', () => {
      [fullNameInput, emailInput, phoneInput].forEach(input => {
        input.removeAttribute('readonly');
        input.classList.add('editable');
      });
      originalValues = {
        fullName: fullNameInput.value,
        email: emailInput.value,
        phone: phoneInput.value
      };
      editButton.style.display = 'none';
      saveButton.style.display = 'inline-block';
      cancelButton.style.display = 'inline-block';
    });
    cancelButton.addEventListener('click', () => {
      fullNameInput.value = originalValues.fullName;
      emailInput.value = originalValues.email;
      phoneInput.value = originalValues.phone;
      [fullNameInput, emailInput, phoneInput].forEach(input => {
        input.setAttribute('readonly', true);
        input.classList.remove('editable');
      });
      editButton.style.display = 'inline-block';
      saveButton.style.display = 'none';
      cancelButton.style.display = 'none';
    });
    saveButton.addEventListener('click', () => {
      if (!fullNameInput.value.trim() || !emailInput.value.trim()) {
        alert('Full Name and Email cannot be empty.');
        return;
      }
      [fullNameInput, emailInput, phoneInput].forEach(input => {
        input.setAttribute('readonly', true);
        input.classList.remove('editable');
      });
      editButton.style.display = 'inline-block';
      saveButton.style.display = 'none';
      cancelButton.style.display = 'none';
      alert('Profile saved successfully!');
      // Add backend saving logic here
    });
    logoutButton.addEventListener('click', () => {
      alert('You have logged out.');
      window.location.href = '/index';
    });
  </script>
</body>
</html>
